<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®å‡ºå¢ƒåˆè§„åˆ¤å®šåŠ©æ‰‹</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --warning-color: #e67e22;
            --danger-color: #c0392b;
            --bg-color: #f4f6f9;
        }

        body {
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .container {
            background: white;
            width: 100%;
            max-width: 600px;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 30px;
            font-size: 24px;
        }

        .question-box {
            margin-bottom: 30px;
            min-height: 100px;
        }

        .question-text {
            font-size: 20px;
            font-weight: 500;
            color: #333;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .btn-group {
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        button {
            padding: 12px 30px;
            font-size: 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: transform 0.1s, box-shadow 0.1s;
        }

        button:active {
            transform: scale(0.98);
        }

        .btn-yes {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-no {
            background-color: #ecf0f1;
            color: #2c3e50;
            border: 1px solid #bdc3c7;
        }

        .btn-reset {
            margin-top: 20px;
            background-color: transparent;
            color: #7f8c8d;
            text-decoration: underline;
            font-size: 14px;
        }

        /* ç»“æœæ ·å¼ */
        .result-box {
            display: none;
            animation: fadeIn 0.5s;
        }

        .result-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .result-desc {
            color: #666;
            margin-bottom: 20px;
        }

        /* ç»“æœé¢œè‰²ä¿®é¥° */
        .res-green { color: var(--success-color); border: 2px solid var(--success-color); background: #eafaf1; padding: 20px; border-radius: 8px;}
        .res-orange { color: var(--warning-color); border: 2px solid var(--warning-color); background: #fdf2e9; padding: 20px; border-radius: 8px;}
        .res-red { color: var(--danger-color); border: 2px solid var(--danger-color); background: #fdedec; padding: 20px; border-radius: 8px;}

        /* å†å²è·¯å¾„é¢åŒ…å±‘ */
        .history {
            margin-bottom: 20px;
            font-size: 12px;
            color: #95a5a6;
            text-align: left;
            line-height: 1.5;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ“‹ æ•°æ®å‡ºå¢ƒåˆè§„åˆ¤å®š</h1>
    
    <!-- é¢åŒ…å±‘åŒºåŸŸï¼Œæ˜¾ç¤ºåˆ¤æ–­è·¯å¾„ -->
    <div id="history" class="history"></div>

    <!-- æé—®åŒºåŸŸ -->
    <div id="quiz-section" class="question-box">
        <div id="question-text" class="question-text">åŠ è½½ä¸­...</div>
        <div class="btn-group">
            <button class="btn-yes" onclick="handleAnswer(true)">æ˜¯ (Yes)</button>
            <button class="btn-no" onclick="handleAnswer(false)">å¦ (No)</button>
        </div>
    </div>

    <!-- ç»“æœåŒºåŸŸ -->
    <div id="result-section" class="result-box">
        <div id="result-content"></div>
        <button class="btn-reset" onclick="startQuiz()">é‡æ–°åˆ¤å®š</button>
    </div>
</div>

<script>
    // å®šä¹‰é€»è¾‘èŠ‚ç‚¹
    // æ¯ä¸ªèŠ‚ç‚¹åŒ…å«ï¼štext (é—®é¢˜), yes (æ˜¯è·³è½¬åˆ°çš„èŠ‚ç‚¹ID), no (å¦è·³è½¬åˆ°çš„èŠ‚ç‚¹ID), type (å¦‚æœä¸ºresultåˆ™ç»“æŸ)
    
    // é€»è¾‘åŸºäºæä¾›çš„å›¾ç‰‡æµç¨‹
    const logicTree = {
        step1: {
            text: "æ˜¯å¦å±äºæ•°æ®å‡ºå¢ƒè¡Œä¸ºï¼Ÿ",
            yes: "step2",
            no: "res_not_scope"
        },
        step2: {
            text: "æ˜¯å¦æ¶‰åŠé‡è¦æ•°æ®ï¼Ÿ",
            yes: "step2_ftz", // è¿›å…¥é‡è¦æ•°æ®åˆ†æ”¯
            no: "step3"      // è¿›å…¥ä¸ªäººæ•°æ®åˆ†æ”¯
        },
        // --- é‡è¦æ•°æ®åˆ†æ”¯ ---
        step2_ftz: {
            text: "æ˜¯å¦é€‚ç”¨è‡ªè´¸åŒºè´Ÿé¢æ¸…å•è±å…ï¼Ÿ",
            yes: "res_exempt",
            no: "res_assessment" // é‡è¦æ•°æ®ä¸è±å…å³è¯„ä¼°
        },
        // --- ä¸ªäººæ•°æ®åˆ†æ”¯ ---
        step3: {
            text: "æ˜¯å¦æ¶‰åŠä¸ªäººæ•°æ®ï¼Ÿ",
            yes: "step4",
            no: "res_not_scope" // æ—¢ä¸æ˜¯é‡è¦æ•°æ®ä¹Ÿä¸æ˜¯ä¸ªäººæ•°æ®
        },
        step4: {
            text: "æ˜¯å¦é€‚ç”¨è‡ªè´¸åŒºè´Ÿé¢æ¸…å•è±å…ï¼Ÿ",
            yes: "res_exempt",
            no: "step5"
        },
        step5: {
            text: "æ˜¯å¦é€‚ç”¨ä¸ªäººä¿¡æ¯åœºæ™¯è±å…ï¼Ÿ<br><span style='font-size:14px; color:#666'>(å¦‚ï¼šä¸ºè®¢ç«‹åˆåŒã€è·¨å¢ƒäººåŠ›èµ„æºç®¡ç†ã€ç´§æ€¥é¿é™©ç­‰)</span>",
            yes: "res_exempt",
            no: "step6"
        },
        step6: {
            text: "è´µå•ä½æ˜¯å¦å±äºå…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½è¿è¥è€… (CIIO)ï¼Ÿ",
            yes: "res_assessment", // CIIO å¿…é¡»è¯„ä¼°
            no: "step7"
        },
        step7: {
            text: "æ˜¯å¦æ¶‰åŠä¸ªäººæ•æ„Ÿæ•°æ®ï¼Ÿ",
            yes: "step7_sensitive_count",
            no: "step7_normal_count"
        },
        // --- æ•æ„Ÿæ•°æ®æ•°é‡åˆ†æ”¯ ---
        step7_sensitive_count: {
            text: "æ¶‰åŠä¸ªäººæ•æ„Ÿæ•°æ®æ˜¯å¦è¶…è¿‡ 1 ä¸‡äººï¼Ÿ",
            yes: "res_assessment",
            no: "res_standard_contract" // æ•æ„Ÿ<1ä¸‡ -> æ ‡å‡†åˆåŒ
        },
        // --- éæ•æ„Ÿæ•°æ®æ•°é‡åˆ†æ”¯ ---
        step7_normal_count: {
            text: "æ¶‰åŠä¸ªäººä¿¡æ¯æ˜¯å¦è¶…è¿‡ 10 ä¸‡äººï¼Ÿ",
            yes: "step7_huge_count",
            no: "res_exempt" // 2024æ–°è§„ï¼šéæ•æ„Ÿ<10ä¸‡è±å…
        },
        step7_huge_count: {
            text: "æ¶‰åŠä¸ªäººä¿¡æ¯æ˜¯å¦è¶…è¿‡ 100 ä¸‡äººï¼Ÿ",
            yes: "res_assessment", // >100ä¸‡
            no: "res_standard_contract" // 10ä¸‡-100ä¸‡ä¹‹é—´
        },

        // --- ç»“æœå®šä¹‰ ---
        res_not_scope: { type: "result", title: "ä¸åœ¨ç®¡ç†èŒƒç•´", desc: "è¯¥è¡Œä¸ºä¸éœ€è¦è¿›è¡Œæ•°æ®å‡ºå¢ƒç”³æŠ¥ã€‚", style: "res-green" },
        res_exempt: { type: "result", title: "è±å…ç”³æŠ¥", desc: "ç¬¦åˆè±å…æ¡ä»¶ï¼Œæ— éœ€ç”³æŠ¥æ•°æ®å®‰å…¨è¯„ä¼°æˆ–å¤‡æ¡ˆæ ‡å‡†åˆåŒã€‚", style: "res-green" },
        res_assessment: { type: "result", title: "æ•°æ®å®‰å…¨è¯„ä¼°", desc: "å±äºé«˜é£é™©å‡ºå¢ƒï¼Œå¿…é¡»å‘å›½å®¶ç½‘ä¿¡éƒ¨é—¨ç”³æŠ¥æ•°æ®å‡ºå¢ƒå®‰å…¨è¯„ä¼°ã€‚", style: "res-red" },
        res_standard_contract: { type: "result", title: "ä¸ªäººä¿¡æ¯æ ‡å‡†åˆåŒ", desc: "éœ€è¦ä¸å¢ƒå¤–æ¥æ”¶æ–¹è®¢ç«‹æ ‡å‡†åˆåŒï¼Œå¹¶å‘ç½‘ä¿¡éƒ¨é—¨å¤‡æ¡ˆï¼ˆæˆ–ç”³è¯·ä¸ªäººä¿¡æ¯ä¿æŠ¤è®¤è¯ï¼‰ã€‚", style: "res-orange" }
    };

    let currentStep = "step1";
    let historyLog = [];

    function startQuiz() {
        currentStep = "step1";
        historyLog = [];
        document.getElementById("quiz-section").style.display = "block";
        document.getElementById("result-section").style.display = "none";
        renderStep();
    }

    function renderStep() {
        const stepData = logicTree[currentStep];
        
        // æ›´æ–°é¢åŒ…å±‘
        updateHistoryDisplay();

        // æ£€æŸ¥æ˜¯å¦æ˜¯ç»“æœé¡µ
        if (stepData.type === "result") {
            showResult(stepData);
            return;
        }

        // æ˜¾ç¤ºé—®é¢˜
        document.getElementById("question-text").innerHTML = stepData.text;
    }

    function handleAnswer(answer) {
        const stepData = logicTree[currentStep];
        
        // è®°å½•å†å²ç”¨äºé¢åŒ…å±‘
        const answerText = answer ? "æ˜¯" : "å¦";
        historyLog.push(`${stepData.text.replace(/<[^>]+>/g, '')} [${answerText}]`);

        // é€»è¾‘è·³è½¬
        if (answer) {
            currentStep = stepData.yes;
        } else {
            currentStep = stepData.no;
        }
        renderStep();
    }

    function showResult(resultData) {
        document.getElementById("quiz-section").style.display = "none";
        const resDiv = document.getElementById("result-section");
        const contentDiv = document.getElementById("result-content");
        
        resDiv.style.display = "block";
        contentDiv.innerHTML = `
            <div class="${resultData.style}">
                <div class="result-title">${resultData.title}</div>
                <div class="result-desc">${resultData.desc}</div>
            </div>
        `;
    }

    function updateHistoryDisplay() {
        const historyDiv = document.getElementById("history");
        if (historyLog.length === 0) {
            historyDiv.innerText = "å¼€å§‹";
        } else {
            historyDiv.innerHTML = historyLog.map(item => `<div>â†“ ${item}</div>`).join("");
        }
    }

    // åˆå§‹åŒ–
    startQuiz();

</script>

</body>
</html>